{% extends "base.html" %}
{% load static %}

{% block content %}

<div class="container-fluid cash-wrapper text-white">

  <!-- ENCABEZADO -->
  <div class="d-flex justify-content-between align-items-start mb-4 flex-wrap gap-3">
    <div>
      <h2 class="mb-1">Caja presencial</h2>
      <p class="text-white-50 small mb-0">
        Registra pedidos de mostrador y envíalos directamente a la cocina.
      </p>
    </div>

    <div class="text-end small text-white-50">
      <div>Fecha: <span class="fw-semibold">{{ dia }}/{{ mes }}/{{ ano }}</span></div>
      <div>Hora: <span class="fw-semibold">{{ hora }}</span></div>
    </div>
  </div>

  <div class="row g-4">

    <!-- FORMULARIO PRINCIPAL -->
    <div class="col-lg-8">
      <div class="card panel-card shadow-sm">
        <div class="card-header panel-card-header d-flex justify-content-between align-items-center">
          <div class="small text-white-50">
            Nuevo pedido de caja
          </div>
          <span class="pill-badge bg-success text-dark">
            MOSTRADOR
          </span>
        </div>

        <div class="card-body">

          <form method="post" class="row g-3">
            {% csrf_token %}

            <!-- Nombre / Teléfono -->
            <div class="col-md-6">
              <label class="form-label small text-white-50 mb-1">Nombre del cliente</label>
              <input type="text" name="nombre"
                     class="form-control form-control-sm bg-dark text-white border-secondary"
                     placeholder="Ej: Juan Pérez">
            </div>

            <div class="col-md-6">
              <label class="form-label small text-white-50 mb-1">Teléfono</label>
              <input type="text" name="telefono"
                     class="form-control form-control-sm bg-dark text-white border-secondary"
                     placeholder="+56 9 ...">
            </div>

            <!-- Dirección -->
            <div class="col-12">
              <label class="form-label small text-white-50 mb-1">
                Dirección (solo si es delivery)
              </label>
              <input type="text" name="direccion"
                     class="form-control form-control-sm bg-dark text-white border-secondary"
                     placeholder="Calle, número, referencia...">
            </div>

            <!-- Forma de pago / Tipo de entrega -->
            <div class="col-md-6">
              <label class="form-label small text-white-50 mb-1">Forma de pago</label>
              <select name="forma_pago"
                      class="form-select form-select-sm bg-dark text-white border-secondary">
                <option value="">Seleccionar...</option>
                <option value="efectivo">Efectivo</option>
                <option value="tarjeta">Tarjeta</option>
                <option value="transferencia">Transferencia</option>
              </select>
            </div>

            <div class="col-md-6">
              <label class="form-label small text-white-50 mb-1">Tipo de entrega</label>
              <select name="tipo_entrega"
                      class="form-select form-select-sm bg-dark text-white border-secondary">
                <option value="">Seleccionar...</option>
                <option value="local">Retiro en local</option>
                <option value="delivery">Delivery</option>
              </select>
            </div>

            <!-- Detalle del pedido -->
            <div class="col-12">
              <label class="form-label small text-white-50 mb-1">
                Detalle del pedido
              </label>
              <textarea name="detalle" rows="3"
                        class="form-control form-control-sm bg-dark text-white border-secondary"
                        placeholder="Ej: 2 completos italianos, 1 churrasco, 1 bebida..."></textarea>
            </div>

            <!-- Total -->
            <div class="col-md-4">
              <label class="form-label small text-white-50 mb-1">Total (CLP)</label>
              <input type="number" name="total" min="0" step="1"
                     class="form-control form-control-sm bg-dark text-white border-secondary text-end"
                     placeholder="0">
            </div>

            <div class="col-md-8 d-flex align-items-end justify-content-end gap-2">
              <button type="reset"
                      class="btn btn-sm btn-outline-light">
                Limpiar
              </button>
              <button type="submit"
                      class="btn btn-sm btn-success fw-semibold px-4">
                Enviar a cocina
              </button>
            </div>

          </form>
        </div>
      </div>
    </div>

    <!-- RESUMEN LATERAL / AYUDA -->
    <div class="col-lg-4">
      <div class="card panel-card shadow-sm mb-3">
        <div class="card-header panel-card-header">
          <span class="small text-white-50">Ayuda rápida</span>
        </div>
        <div class="card-body small text-white-50">
          <ul class="mb-0">
            <li>El pedido se crea como <strong>origen local</strong> y se envía a la cocina.</li>
            <li>Puedes usar el campo <strong>detalle</strong> como “comanda” del pedido.</li>
            <li>Desde el <strong>Panel de cocina</strong> se cambia el estado a “en cocina” y “listo”.</li>
          </ul>
        </div>
      </div>

      <div class="card panel-card shadow-sm">
        <div class="card-header panel-card-header d-flex justify-content-between align-items-center">
          <span class="small text-white-50">Accesos rápidos</span>
        </div>
        <div class="card-body d-grid gap-2">
          <a href="{% url 'caja:cocina_panel' %}"
             class="btn btn-sm btn-outline-light w-100">
            Abrir panel de cocina
          </a>
          <a href="{% url 'caja:cocina_tv' %}"
             class="btn btn-sm btn-outline-light w-100">
            Modo TV cocina
          </a>
          <a href="{% url 'caja:inventario_panel' %}"
             class="btn btn-sm btn-outline-light w-100">
            Dashboard inventario / ventas
          </a>
        </div>
      </div>
    </div>

  </div>
</div>

{% endblock %}
